# billing_test
Немного о выполненом тестовом задании 

Выполнял на локальной машине.  (Mamp, phpmyadmin, php, css, jquery)

База данных - db.sql
Папка backend/
   1. db.php - файл в котором находится класс для работы с БД
 2. billing.php - файл в котором находится класс для работы с системой платежей. 
 3. register.php — файл в котором получаются данные для формы оплаты 
Папка parts/ - тут находятся view
   1. header.php - шапка 
    2. register.php - подключение формы оплаты(view)
 3. footer.php -  подвал
Папка info/ 
   1.allPayments.php — обработка результатов от метода, который возвращает платежи за указанный период времени (назвал его именно так, потому что вдруг у нас будут другие методы)

Папка register/ 
   1. index.php — регистрирует нашу оплату или находит уже имеющуюся и отдаёт нам url, по которому можно воспроизвести оплату. 

Файл, который находится по пути : 
/payments/card/form/index.php — файл с формой оплаты там идёт подключение все, что у нас лежит в папке /parts

Папка tests/ 

tests/payment/index.php - файл имитирующую отправку на наш обработчик /register

tests/payment_list/index.php — файл который делает запрос с определенным    промежутком даты, и получает обратно результат — вывел на страницу в body

В корне лежат ещё пару файлов css/js — это стили и скрипт, которые используются во view формы 

Механизм такой, что при регистрации мы регистрируем платежку в таблицу payments и статус, ее статус W — wait. 

После успешной оплаты : мы ставим эту платежку в статус Y и записываем в таблицу bill - запись оплаты
 1.  id- платежки из таблицы payments( по хорошему нужно сделать связь двух таблиц и зависимость по этому полю со стороны описываемой таблицы)
 2. name - имя того, кто оплатил
 3. card_number - номер карты 
После неудачной оплаты : мы ставим эту платежку в статус N, но позволяем создать новую платежку тем же запросом на файл /register 

В целом основные пункты вроде бы выполнены. Делал в быстром темпе для того чтобы не тянуть с  обратной связью на тестовое задание. 
Попытался реализовать дополнительный метод, в результате тестировал и алгоритм Луна и непосредственно саму систему записи. Также попытался сделать ограниченное время сессии, вероятно я сделал ее не полностью, создавая после этого новую платежку, но не закрывая старую, думаю это можно было бы реализовать простенькой функцией на кроне. 
Сделал синхронный редирект после успешной оплаты на backref, пытался честно говоря сделать асинхронный http запрос, но так как не имею опыта не хотел делать изначально неправильно и выдавать это за выполненный пункт.  

Жду любой разумный фидбек. 

Спасибо за предоставленное тестовое задание. 

С уважением, Сергей.
